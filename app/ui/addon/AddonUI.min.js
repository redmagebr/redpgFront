function AddonUI(){this.$box=$("#addonBox").hide();this.$handle=$("#addonBoxHandle").empty();this.$ul=$("#addonBoxUL");this.currentAddon="";this.currentList={};this.currentType="";this.addonize=function(a,b){a.off(".addon").on("mouseenter.addon",function(c){window.app.ui.addonui.showAddonBox($(this),c,"addon")}).on("mouseleave.addon",function(){window.app.ui.addonui.$box.stop(true,false).fadeOut(100)}).on("mousemove.addon",function(c){window.app.ui.addonui.moveAddonBox(c)}).attr("data-listid",b)};this.turnVantagem=function(a,b){a.off(".addon").on("mouseenter.addon",function(c){window.app.ui.addonui.showAddonBox($(this),c,"vantagem")}).on("mouseleave.addon",function(){window.app.ui.addonui.$box.stop(true,false).fadeOut(100)}).on("mousemove.addon",function(c){window.app.ui.addonui.moveAddonBox(c)}).attr("data-listid",b)};this.turnDesvantagem=function(a,b){a.off(".addon").on("mouseenter.addon",function(c){window.app.ui.addonui.showAddonBox($(this),c,"desvantagem")}).on("mouseleave.addon",function(){window.app.ui.addonui.$box.stop(true,false).fadeOut(100)}).on("mousemove.addon",function(c){window.app.ui.addonui.moveAddonBox(c)}).attr("data-listid",b)};this.unAddonize=function(a){a.off(".addon").attr("data-listid","")};this.showAddonBox=function(a,f,c){if(c==="addon"){this.currentList=window.techAddonsHash;this.listType="addon"}else{if(c==="vantagem"){this.currentList=window.vantagensHash;this.listType="vantagem"}else{if(c==="desvantagem"){this.listType="desvantagem";this.currentList=window.desvantagensHash}}}this.currentAddon=a.attr("data-listid").toUpperCase().replace(/ *\([^)]*\) */,"").trim();if(this.currentList===undefined){var b=function(){window.app.ui.addonui.updateAddonBox(2)};var d=function(){window.app.ui.addonui.updateAddonBox(0)};if(this.listType==="addon"){window.app.addonapp.loadTecnicas(b,d)}else{if(this.listType==="vantagem"||this.listType==="desvantagem"){window.app.addonapp.loadVantagens(b,d)}}this.updateAddonBox(1)}else{window.app.ui.addonui.updateAddonBox(3)}this.$box.stop(true,false).fadeIn(100);this.moveAddonBox(f)};this.updateAddonBox=function(e){if(this.listType==="addon"){this.currentList=window.techAddonsHash}else{if(this.listType==="vantagem"){this.currentList=window.vantagensHash}else{if(this.listType==="desvantagem"){this.currentList=window.desvantagensHash}}}var g=this.$box.height();if(this.currentList===undefined){this.$handle.empty().append("<img id='addonBoxIcon' src='http://rules.redpg.com.br/img/icon/Unknown.png' />");if(e===1){this.$handle.append(window.app.ui.language.getLingo("_ADDONBOXLOADING_"));this.$ul.empty().append($("<li />").text(window.app.ui.language.getLingo("_ADDONBOXLOADINGEXPLAIN_")))}else{if(e===0){this.$handle.append(window.app.ui.language.getLingo("_ADDONBOXLOADINGERROR_"));this.$ul.empty().append($("<li />").text(window.app.ui.language.getLingo("_ADDONBOXLOADINGERROREXPLAIN_")))}else{this.$handle.append(window.app.ui.language.getLingo("_ADDONBOXLOADEDERROR_"));this.$ul.empty().append($("<li />").text(window.app.ui.language.getLingo("_ADDONBOXLOADEDERROREXPLAIN_")))}}}else{if(this.currentList[this.currentAddon]===undefined){this.$handle.empty().append("<img id='addonBoxIcon' src='http://rules.redpg.com.br/img/icon/Unknown.png' />").append(window.app.ui.language.getLingo("_ADDONBOXNOTFOUND_"));this.$ul.empty().append($("<li />").text(window.app.ui.language.getLingo("_ADDONBOXNOTFOUNDEXPLAIN_")))}else{if(this.listType==="addon"){var d=this.currentList[this.currentAddon];this.$handle.empty();var c=$('<img id="addonBoxIcon" />').attr("src","http://rules.redpg.com.br/img/icon/"+d.nomeLimpo+".png");this.$handle.text(d.nome).prepend(c);this.$ul.empty();var f;for(var b=0;b<d.efeitos.length;b++){f=$("<li />").text(d.efeitos[b]);this.$ul.append(f)}}else{if(this.listType==="vantagem"||this.listType==="desvantagem"){var d=this.currentList[this.currentAddon];this.$handle.empty().text(d.nome+", "+d.pontos+(d.pontos!=="1"?" pontos":" ponto"));this.$ul.empty();var f;for(var b=0;b<d.descricao.length;b++){f=$("<li />").text(d.descricao[b]);this.$ul.append(f)}if(d.requisitos!==undefined){f=$("<li />").text(d.requisitos).prepend("<b>Requisitos: </b>");this.$ul.append(f)}}}}}var a=g-this.$box.height();this.$box.css("top",a+this.$box.position().top)};this.moveAddonBox=function(a){var c=a.pageY-this.$box.height()-20;var b=a.pageX+20;if(c<10){c=10}if(b+this.$box.width()+10>$(window).width()){b=($(window).width()-this.$box.width()-10)}this.$box.css({left:b,top:c})}};